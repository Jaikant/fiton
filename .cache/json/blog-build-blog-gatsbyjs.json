{"data":{"allContentfulBlogPost":{"edges":[{"node":{"id":"ryzymF42OGcuGmS2q8sw4","title":"A step by step guide to build a Gatsbyjs blog","tags":["SERVERLESS"],"description":{"id":"ryzymF42OGcuGmS2q8sw4descriptionTextNode","description":"A step by step guide to build a personal blog using gatsbyjs and netlify. Gatsbyjs is a javascript tool which uses react and graphql to generate optimised and performant websites."},"createdAt":"2018-02-06T15:16:35.160Z","blog":{"childMarkdownRemark":{"html":"<p>In this post we will create a barebone blogging website from scratch using GatsbyJs. <em>The purpose being to learn a few basic concepts of Gatsbyjs.</em></p>\n<p>Blogs will be in markdown format and will reside in github.</p>\n<h2 id=\"step-1-install-prerequisites---nodejs--gatsby\"><a href=\"#step-1-install-prerequisites---nodejs--gatsby\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 1: Install Prerequisites - Nodejs &#x26; Gatsby</h2>\n<p>If you don’t have Node.js installed, go to <a href=\"https://nodejs.org/\">https://nodejs.org/</a> and install the recommended version for your operating system.</p>\n<p>Install the Gatsby CLI as below:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\">npm install <span class=\"token operator\">--</span>global gatsby<span class=\"token operator\">-</span>cli</code></pre>\n      </div>\n<h2 id=\"step-2-install-the-barebones-gatsby-starter-kit-for-this-blog\"><a href=\"#step-2-install-the-barebones-gatsby-starter-kit-for-this-blog\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 2: Install the barebones gatsby starter kit for this blog.</h2>\n<p>We will do a git clone followed by a npm install of the starter kit.\nNote[Optional read]: Gatsby provides a <code class=\"language-text\">gatsby new</code> command which does a git clone followed by an npm install. But we will not use that, as we want to checkout branches from the git repository further down the tutorial.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\">git clone https<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>github<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>Jaikant<span class=\"token operator\">/</span>gatsby<span class=\"token operator\">-</span>blog<span class=\"token operator\">-</span>starter\nnpm install</code></pre>\n      </div>\n<p>The starter kit above is the default starter kit with a few extra plugins to process markdowns and images for our blogs.</p>\n<h2 id=\"step-3-take-a-peek-at-the-starter-kit\"><a href=\"#step-3-take-a-peek-at-the-starter-kit\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 3: Take a peek at the starter kit.</h2>\n<h6 id=\"tldr-the-gatsby-develop-command-starts-the-dev-server-the-page-directory-in-gatsby-contains-the-pages\"><a href=\"#tldr-the-gatsby-develop-command-starts-the-dev-server-the-page-directory-in-gatsby-contains-the-pages\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TLDR: The gatsby develop command starts the dev server, The page directory in gatsby contains the pages.</h6>\n<p>Now, lets take a look at the gatsby structure.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-sh\"><code class=\"language-sh\">    src\n    ├── pages\n    │   ├── index.jsx\n    ├── templates\n    │   └── ...\n    └── layouts\n        └── index.jsx</code></pre>\n      </div>\n<p>The <code class=\"language-text\">pages</code> directory is a special one for gatsby. Any <code class=\"language-text\">.js</code> file created here is detected by Gatsby and is converted into a page.</p>\n<p>The <code class=\"language-text\">src/layouts</code> is another directory which is worth taking a look at now. This directory contains the layout of the page, more specifically the ‘header’ which will be constant across all pages.</p>\n<p>The <code class=\"language-text\">src/templates</code> directory is of importance as well, but we will look into it at a later step.</p>\n<p>The <code class=\"language-text\">src/components</code> directory is a place where we can place our react components. We named it <code class=\"language-text\">components</code>, but it can be named anything.</p>\n<p>Now, lets learn how to run gatsby in our development environment. In the development environment we will run the below command. Gatsby provides hot reloading in the development environment for both code and styles.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\">cd gatsby<span class=\"token operator\">-</span>blog<span class=\"token operator\">-</span>starter<span class=\"token operator\">/</span>\ngatsby develop</code></pre>\n      </div>\n<p>On successful start, you will be able to access the development server at <a href=\"http://localhost:8000\">http://localhost:8000</a>. On opening this link …</p>\n<p><img src=\"//images.contentful.com/ojam5vx77jn8/1wWYasFyZuaAy8Ky88UUyM/3902ea41426681bff36559f989b3d68f/gatsby-tut-0.png\" alt=\"gatsby-tut-0\"></p>\n<p>Now, Lets look at the source code for this page.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\">cd src<span class=\"token operator\">/</span>pages<span class=\"token operator\">/</span>\nvi index<span class=\"token punctuation\">.</span>js</code></pre>\n      </div>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> Link <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby-link'</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">IndexPage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>Hi people<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>Welcome to your <span class=\"token keyword\">new</span> <span class=\"token class-name\">Gatsby</span> site<span class=\"token punctuation\">.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>Now go build something great<span class=\"token punctuation\">.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Link</span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/page-2/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Go to page <span class=\"token number\">2</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Link</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> IndexPage</code></pre>\n      </div>\n<p>Thats about it, the index.js contains all the code needed. Now lets take a look at the directory structure:</p>\n<h2 id=\"step-4-lets-get-our-sample-blogs\"><a href=\"#step-4-lets-get-our-sample-blogs\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 4: Lets get our sample blogs.</h2>\n<h6 id=\"tldr-markdown-is-passed-as-props-to-react-components\"><a href=\"#tldr-markdown-is-passed-as-props-to-react-components\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TLDR: Markdown is passed as props to react components</h6>\n<p>Lets pull some sample blogs from github.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\">git checkout markdowns</code></pre>\n      </div>\n<p>Assuming you are in the ‘src/pages’ directory. If you list the files in the directory. You will be able to see the markdown file(index.md) and an image file within the directory.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-sh\"><code class=\"language-sh\">.\n└── src\n    ├── pages\n       ├── index.js\n       └── dayara-bugyal\n       |    ├── index.md\n       |    │-- dayara.jpg\n       └── gaumukh-tapovan\n       └── hampta-pass\n       └── kuari-pass</code></pre>\n      </div>\n<p>We will use the image for the blog previews as well as for the cover picture for the blog.</p>\n<p>Lets take a look inside the index.md. These markdown file will be added to the gatsby data layers and we will pull the content of these files into our react components using graphQL. The content of the markdown will be passed as props to the react components. For now, you could just see the simple structure of the file.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-sh\"><code class=\"language-sh\">---\ntitle: &quot;Dayara Bugyal Trek&quot;\n---\n\n![](dayara.jpg)\n\nDayara Bugyal is perhaps one of the most beautiful alpine meadow in India. The meadow stretches out far and wide. The panoramic view of the Himalayas from here is breathtaking. Situated at an elevation of about 3048 m, this vast meadow is second to none in natural beauty. The trek goes through open stretches and dense forest at different places. In winters the meadows are covered with snow &amp; look extremely beautiful.\n...</code></pre>\n      </div>\n<h2 id=\"step-5-lets-build-a-preview-of-our-blog-posts\"><a href=\"#step-5-lets-build-a-preview-of-our-blog-posts\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 5: Lets build a preview of our blog posts</h2>\n<p>Now lets create a blog preview in the first page.\nWe would have to stop gatsby dev server by pressing a <code class=\"language-text\">ctrl + C</code> in the terminal in which it is running.</p>\n<p>Now in the other terminal, lets checkout the blog-preview branch.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\">git checkout blog<span class=\"token operator\">-</span>preview</code></pre>\n      </div>\n<p>After checking it out, lets restart the gatsby dev server. (from a different terminal)</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-sh\"><code class=\"language-sh\">gatsby develop</code></pre>\n      </div>\n<p>We should now see this at <a href=\"http://localhost:8000\">http://localhost:8000</a></p>\n<p>  <img src=\"//images.contentful.com/ojam5vx77jn8/2prKxRLYSccsIq2GAUmaqW/ec848b77eee3e31db991e1999dea312e/gatsby-tut-1.png\" alt=\"gatsby-tut-1\"></p>\n<p>In this branch, we have modified the <code class=\"language-text\">/src/pages/index.js \\</code>. We have included a graphQL query at the bottom of the react component. During the gatsby build/develop/bootstrap process, this query is run and the output is passed as <code class=\"language-text\">data</code> to the react component.</p>\n<p>The graphQL query in the index.js is as follows:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> BlogsQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token string\">`\n  query blogsQuery {\n    allMarkdownRemark {\n      edges {\n        node {\n          id\n          frontmatter {\n            title\n          }\n        }\n      }\n    }\n  }\n`</span></span></code></pre>\n      </div>\n<p>Lets look at the output of this query. GraphQL provides an interface to run queries. Lets open this interface on our browser.\n<a href=\"http://localhost:8000/___graphql\">http://localhost:8000/___graphql</a></p>\n<p>Cut and paste the query below in the left hand column of graphiQL and click the run icon on top.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-sh\"><code class=\"language-sh\">{\n  allMarkdownRemark {\n    edges {\n      node {\n        id\n        frontmatter {\n          title\n        }\n      }\n    }\n  }\n}</code></pre>\n      </div>\n<p>The output of the query will be something like below. Just observe the node and its fields which come from the markdowns. The <code class=\"language-text\">edges</code> and <code class=\"language-text\">node</code> are central to the gatsby data layer. All data in gatsby is modelled around the node. If interested you can read about that here, but it is not really needed for this tutorial. <a href=\"https://www.gatsbyjs.org/docs/node-interface/\">https://www.gatsbyjs.org/docs/node-interface/</a></p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-sh\"><code class=\"language-sh\">{\n  &quot;data&quot;: {\n    &quot;allMarkdownRemark&quot;: {\n      &quot;edges&quot;: [\n        {\n          &quot;node&quot;: {\n            &quot;id&quot;: &quot;/Users/jai/temp/gatsby-blog-starter/src/pages/gaumukh-tapovan/index.md absPath of file &gt;&gt;&gt; MarkdownRemark&quot;,\n            &quot;frontmatter&quot;: {\n              &quot;title&quot;: &quot;Gaumukh Tapovan - Source of the ganges&quot;\n            }\n          }\n        },\n        ...</code></pre>\n      </div>\n<p>Now lets look at the index.js we modified. The graphQL result is contained in <code class=\"language-text\">data</code>. We simply map through <code class=\"language-text\">data.allMarkdownRemark.edges</code> and print the title.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">IndexPage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">{</span>\n     data<span class=\"token punctuation\">.</span>allMarkdownRemark<span class=\"token punctuation\">.</span>edges<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>post<span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n         <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>padding<span class=\"token punctuation\">:</span> <span class=\"token string\">'16px'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span>\n           <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Link</span> <span class=\"token attr-name\">to</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Link</span><span class=\"token punctuation\">></span></span>\n         <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n       <span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre>\n      </div>\n<h2 id=\"step-6-lets-add-images-to-the-preview\"><a href=\"#step-6-lets-add-images-to-the-preview\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 6: Lets add images to the preview.</h2>\n<p>Lets add an image to the blog preview.</p>\n<p>First lets stop the gatsby dev server.</p>\n<p>Lets checkout the <code class=\"language-text\">blog-preview-images</code> branch.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\">git checkout blog<span class=\"token operator\">-</span>preview<span class=\"token operator\">-</span>images</code></pre>\n      </div>\n<p>Now lets restart the dev server in another terminal, but before lets delete the .cache directory as it will contain some stale query results.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-sh\"><code class=\"language-sh\">rm -r .cache\ngatsby develop</code></pre>\n      </div>\n<p>Our screen looks like this now. We modified the index.js and the graphQL query. We also changed one other thing, if you find out what that is, do let me know :)</p>\n<p><img src=\"//images.contentful.com/ojam5vx77jn8/4tT92h39vWQmy2MesMOOEu/b930456f17b636772b9d1d43bf7330ca/gatsby-tut-2.png\" alt=\"gatsby-tut-2\"></p>\n<h2 id=\"step-7-lets-create-all-the-blog-pages\"><a href=\"#step-7-lets-create-all-the-blog-pages\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 7: Lets create all the blog pages.</h2>\n<p>Stop the gatsby dev server. </p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\">git checkout blog<span class=\"token operator\">-</span>posts</code></pre>\n      </div>\n<p>Restart the gatsby dev server</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-sh\"><code class=\"language-sh\">gatsby develop</code></pre>\n      </div>\n<p>And … our pages will look like below, on clicking the blog preview image.</p>\n<p><img src=\"//images.contentful.com/ojam5vx77jn8/1K3Jy2KBuQWigIcEoOQuyA/05d66d7c2c4478cf5d96cc74a800abf6/gatsby-tut-3.png\" alt=\"gatsby-tut-3\"></p>\n<p>To create the blog pages, we add a template component in <code class=\"language-text\">src/templates</code></p>\n<p>We then use the Gatsby onCreateNode and createPages API in the gatsby-node.js file.</p>\n<p>We essentially run a graphQL query from gatsby-node.js and pass the output of that to the creatPage API to create our pages.</p>\n<p>We use the onCreateNode, to add a slug to the markdown fields. The slug determines the url of the page.</p>\n<p>Thats about it! </p>\n<p>To create a production build, run the following commands and the build will be available in the <code class=\"language-text\">public</code> directory.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-sh\"><code class=\"language-sh\">gatsby build</code></pre>\n      </div>\n<p>This website can be deployed on <a href=\"https://netlify.com\">netlify</a> in just a few clicks and when intergrated with the code in github, it provides a seamless build and deploy. You would just need to push a blog in markdown format to github and within minutes it would be live, automatically :)</p>\n<p>It should be pretty simple to figure it out.</p>\n<p>Any questions you can write to me at <code class=\"language-text\">jaikant@gmail.com</code>.</p>","timeToRead":7}},"featuredImage":{"title":"Leonardo Di Caprio in the great gatsby","resize":{"src":"//images.ctfassets.net/ojam5vx77jn8/3QDJUfMpHqMGm0W0A6066y/8690f8e8228c0562bc89fdf018d7386c/gatsby.jpg?w=1200&h=630&fl=progressive&q=50&fit=fill&f=faces"},"sizes":{"aspectRatio":1.7777777777777777,"src":"//images.ctfassets.net/ojam5vx77jn8/3QDJUfMpHqMGm0W0A6066y/8690f8e8228c0562bc89fdf018d7386c/gatsby.jpg?w=800&q=50","srcSet":"//images.ctfassets.net/ojam5vx77jn8/3QDJUfMpHqMGm0W0A6066y/8690f8e8228c0562bc89fdf018d7386c/gatsby.jpg?w=200&h=113&q=50 200w,\n//images.ctfassets.net/ojam5vx77jn8/3QDJUfMpHqMGm0W0A6066y/8690f8e8228c0562bc89fdf018d7386c/gatsby.jpg?w=400&h=225&q=50 400w,\n//images.ctfassets.net/ojam5vx77jn8/3QDJUfMpHqMGm0W0A6066y/8690f8e8228c0562bc89fdf018d7386c/gatsby.jpg?w=800&h=450&q=50 800w,\n//images.ctfassets.net/ojam5vx77jn8/3QDJUfMpHqMGm0W0A6066y/8690f8e8228c0562bc89fdf018d7386c/gatsby.jpg?w=1200&h=675&q=50 1200w,\n//images.ctfassets.net/ojam5vx77jn8/3QDJUfMpHqMGm0W0A6066y/8690f8e8228c0562bc89fdf018d7386c/gatsby.jpg?w=1600&h=900&q=50 1600w","sizes":"(max-width: 800px) 100vw, 800px"}},"author":{"name":"Jai","authorBio":"Jai is passionate about social issues and causes. He is the founder of sherpafeet and Tech47.","profilePicture":{"title":"Jai Profile Picture","resolutions":{"base64":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAlgCWAAD/4gIcSUNDX1BST0ZJTEUAAQEAAAIMbGNtcwIQAABtbnRyUkdCIFhZWiAH3AABABkAAwApADlhY3NwQVBQTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWxjbXMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAApkZXNjAAAA/AAAAF5jcHJ0AAABXAAAAAt3dHB0AAABaAAAABRia3B0AAABfAAAABRyWFlaAAABkAAAABRnWFlaAAABpAAAABRiWFlaAAABuAAAABRyVFJDAAABzAAAAEBnVFJDAAABzAAAAEBiVFJDAAABzAAAAEBkZXNjAAAAAAAAAANjMgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB0ZXh0AAAAAEZCAABYWVogAAAAAAAA9tYAAQAAAADTLVhZWiAAAAAAAAADFgAAAzMAAAKkWFlaIAAAAAAAAG+iAAA49QAAA5BYWVogAAAAAAAAYpkAALeFAAAY2lhZWiAAAAAAAAAkoAAAD4QAALbPY3VydgAAAAAAAAAaAAAAywHJA2MFkghrC/YQPxVRGzQh8SmQMhg7kkYFUXdd7WtwegWJsZp8rGm/fdPD6TD////bAEMACQYHCAcGCQgICAoKCQsOFw8ODQ0OHBQVERciHiMjIR4gICUqNS0lJzIoICAuPy8yNzk8PDwkLUJGQTpGNTs8Of/bAEMBCgoKDgwOGw8PGzkmICY5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5Of/AABEIABQAFAMBIgACEQEDEQH/xAAZAAEAAwEBAAAAAAAAAAAAAAAAAgYHBAX/xAAoEAACAQMBBwQDAAAAAAAAAAABAgMABBEhBQYSIjFBgQcTUXEVYaH/xAAXAQADAQAAAAAAAAAAAAAAAAACAwQB/8QAGREBAQADAQAAAAAAAAAAAAAAAQACERIx/9oADAMBAAIRAxEAPwCvrf7TlmuQkcIjgdl5gTx4Pb+V7Fw8dtbPPIRgDpkYqG7ca7QiM0ygSxnTm1mxrk9j2HjWq7vLtC4mihZoAqhmSTBzwPnpjxp5qbT0jUbx5ErDs31HtLGyS3EMoKs5OY1bJLE9SfggeKVl84aOQqCT36YpTuCSto27cCR7JW6QFZQ7N1PYkAfWldDhPxctz7cfuvPwk8I+M5+/3SlFgG23JdFGGCIRjkU/YpSlLfYi/9k=","width":125,"height":125,"src":"//images.ctfassets.net/ojam5vx77jn8/48JEu6lPigqI46gmeyuysC/4bbc705827749cebe670959385fb7cc2/jai.jpeg?w=125&q=50","srcSet":"//images.ctfassets.net/ojam5vx77jn8/48JEu6lPigqI46gmeyuysC/4bbc705827749cebe670959385fb7cc2/jai.jpeg?w=125&h=125&q=50 1x,\n//images.ctfassets.net/ojam5vx77jn8/48JEu6lPigqI46gmeyuysC/4bbc705827749cebe670959385fb7cc2/jai.jpeg?w=188&h=188&q=50 1.5x,\n//images.ctfassets.net/ojam5vx77jn8/48JEu6lPigqI46gmeyuysC/4bbc705827749cebe670959385fb7cc2/jai.jpeg?w=250&h=250&q=50 2x,\n//images.ctfassets.net/ojam5vx77jn8/48JEu6lPigqI46gmeyuysC/4bbc705827749cebe670959385fb7cc2/jai.jpeg?w=375&h=375&q=50 3x"}}}}}]}},"pathContext":{"slug":"/blog/build-blog-gatsbyjs","prev":{"id":"c3zDfdcnBqEqKqmMoYcumQI","featured":null,"title":"Configuring AWS Code Deploy ","tags":["CLOUD"],"slug":"/blog/aws-code-deploy","createdAt":"2018-02-22T06:08:09.219Z","updatedAt":"April 19 2018","description":{"id":"c3zDfdcnBqEqKqmMoYcumQIdescriptionTextNode"},"blog":{"childMarkdownRemark":{"timeToRead":3,"excerpt":"Here I describe how we could use AWS Code deploy to transfer your code to an EC2 server for deployment. AWS code deploy can be used for much more, but that is not the topic of this blog. If you have a…"}},"featuredImage":{"title":"AWS Code Deploy","resolutions":{"width":350,"height":175,"src":"//images.ctfassets.net/ojam5vx77jn8/1rxl05X29KUYYawGA8AKQY/ff9c5fa57f39d1d9b6775c56b270a920/aws-codedeploy.png?w=350&h=175&q=50&fit=fill&f=faces","srcSet":"//images.ctfassets.net/ojam5vx77jn8/1rxl05X29KUYYawGA8AKQY/ff9c5fa57f39d1d9b6775c56b270a920/aws-codedeploy.png?w=350&h=175&q=50&fit=fill&f=faces 1x,\n//images.ctfassets.net/ojam5vx77jn8/1rxl05X29KUYYawGA8AKQY/ff9c5fa57f39d1d9b6775c56b270a920/aws-codedeploy.png?w=525&h=263&q=50&fit=fill&f=faces 1.5x,\n//images.ctfassets.net/ojam5vx77jn8/1rxl05X29KUYYawGA8AKQY/ff9c5fa57f39d1d9b6775c56b270a920/aws-codedeploy.png?w=700&h=350&q=50&fit=fill&f=faces 2x,\n//images.ctfassets.net/ojam5vx77jn8/1rxl05X29KUYYawGA8AKQY/ff9c5fa57f39d1d9b6775c56b270a920/aws-codedeploy.png?w=1050&h=525&q=50&fit=fill&f=faces 3x"}}},"next":false}}